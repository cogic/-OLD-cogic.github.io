(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0069da4f"],{"0270":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAlhJREFUeF7tW0FrE0EYfTO7tomtlx5URA8SaYr0JlXoTb2IJ0/eClWvsj2roK3aPxDxaqQIPXoQj2IFTwUPIgqxwf4Ar7Y0uzvzyca2aHSdRdMm2X0LYbObmWG/t+9772VJFAq+qYLXDwJABhQcAbZAJwHu12qvk3NW5M383Nx83gnyGwMWajVJihaRBQJABrAFqAEUwZwjsHcuUK+XMDvbglJtV+nXbU8AGF16dAFQr7aLjgC0frwkVNAtgYTt49he/HY9+NpLcPYDgPT6YnuYAJABbAFqAEWwhwjQBTrB78bX4Y4ckMkGzz1bOx5thSWBivQwQnheZFqbsfV0ZEp+9PHq6QjofqjqGwacrX+6IgrP/94NEo/IwUMr105udatrBgwAYETKZQJABrAFqAEUwS4hQBdwBaHG9KUpK+qmAmIrMNCIk/ciMMkeULGIGN/XT8bfvvySrPcvQShbDuiBDW4DsOpinOfpCgEgA9gC1ACKIF2ANrhvOaB5uzIpUEMCZS1ia6Gtr7VJ9gcQtY8NPDvxsLGeZuPOJNjPOaBx59QMgCVXRqkuNlN/ClQEAMLqYnO4yAwgAGQAW4AaQBGkC6QgwByQ8ZFYXz4RypgEmQP+KwesT10+uqHMEVfeHjNDa8fevdhMxpWXH5/QsRlzzdmYCd7vjDnz9EPFM2rUNWf1xuTunMat8Qn4SFX4nbWqDz7vzulc36kBrgsa9M8JQJoIKmBl0O/un67/bhCc//l8KgPyWHxS070g+KVmApDXO521Lv5rLCtSeR1HBuT1zmatq/AM+A5Hvpd9tFg3fQAAAABJRU5ErkJggg=="},"0efa":function(e,t,i){"use strict";var n=i("62cb"),o=(i("b0c0"),i("7a23")),s={class:"toolbar"},c=["onClick","onDblclick"],l={class:"fileview"},a=["src"],d=["onUpdate:modelValue","id"];function r(e,t,i,r,g,f){var u=n["a"];return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[g.toShow?(Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:0,ref:"PopBox",trueFunc:g.trueFunc,info:g.info,isExitShow:g.isExitShow},null,8,["trueFunc","info","isExitShow"])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",{id:"stage",onMousedown:t[8]||(t[8]=function(){return f.endRename&&f.endRename.apply(f,arguments)})},[Object(o["createElementVNode"])("div",{class:"title",style:Object(o["normalizeStyle"])(f.titleStyle)},Object(o["toDisplayString"])(i.stageConfig.title),5),Object(o["createElementVNode"])("div",s,[f.toolShow("build")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:Object(o["normalizeClass"])({"text-disable":!0,tool:!0,able:!0}),onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(t){return e.$emit("newTab",f.buildTabConfig)}),["prevent"]))},"新建")):Object(o["createCommentVNode"])("",!0),f.toolShow("edit")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:1,class:Object(o["normalizeClass"])({"text-disable":!0,tool:!0,able:g.selectedFile&&g.selectedFile._id}),onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(){return f.edit&&f.edit.apply(f,arguments)}),["prevent"]))},"打开",2)):Object(o["createCommentVNode"])("",!0),f.toolShow("rename")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:2,class:Object(o["normalizeClass"])({"text-disable":!0,tool:!0,able:g.selectedFile&&g.selectedFile._id}),onClick:t[2]||(t[2]=Object(o["withModifiers"])((function(){return f.rename&&f.rename.apply(f,arguments)}),["prevent"]))},"重命名",2)):Object(o["createCommentVNode"])("",!0),f.toolShow("delete")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:3,class:Object(o["normalizeClass"])({"text-disable":!0,tool:!0,able:g.selectedFile&&g.selectedFile._id}),onClick:t[3]||(t[3]=Object(o["withModifiers"])((function(){return f.toDelete&&f.toDelete.apply(f,arguments)}),["prevent"]))},"删除",2)):Object(o["createCommentVNode"])("",!0),f.toolShow("view")?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:4,class:Object(o["normalizeClass"])({"text-disable":!0,tool:!0,able:!0}),onClick:t[4]||(t[4]=function(e){return g.isImageView=!g.isImageView})},"切换视图")):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])({"text-disable":!0,tool:!0,able:!0}),onClick:t[5]||(t[5]=function(){return f.flush&&f.flush.apply(f,arguments)})},"刷新")]),Object(o["createElementVNode"])("div",{class:Object(o["normalizeClass"])({store:!0,store2:!g.isImageView})},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(i.stageConfig.files,(function(n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{onClick:function(e){return g.selectedFile=n},onDblclick:Object(o["withModifiers"])((function(t){return e.$emit("newTab",f.fileTabConfig(n))}),["stop","prevent"])},[g.isDeleteId!==n._id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:0,class:Object(o["normalizeClass"])({file:g.isImageView,file2:!g.isImageView,selected:g.selectedFile&&g.selectedFile._id===n._id})},[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("img",{src:n.imgSrc,alt:"img",onErrorOnce:t[6]||(t[6]=function(e){return f.onerror(e,i.stageConfig.type)})},null,40,a)]),Object(o["createElementVNode"])("div",{class:"filename",onDblclick:t[7]||(t[7]=Object(o["withModifiers"])((function(){return f.rename&&f.rename.apply(f,arguments)}),["stop","prevent"]))},[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":function(e){return n.name=e},readonly:"",id:n._id,maxlength:"30"},null,8,d),[[o["vModelText"],n.name]])],32)],2)):Object(o["createCommentVNode"])("",!0)],40,c)})),256))],2)],32)],64)}var g={components:{PopBox:n["a"]},props:{stageConfig:{type:Object,default:{}}},data:function(){return{selectedFile:void 0,isDeleteId:"",isImageView:!0,toShow:!1,info:"",isExitShow:!0,trueFunc:void 0}},computed:{titleStyle:function(){if(this.stageConfig.style&&this.stageConfig.style.title)return this.stageConfig.style.title}},watch:{selectedFile:function(e,t){t&&t._id&&document.getElementById(t._id)&&!1===document.getElementById(t._id).readOnly&&(document.getElementById(t._id).readOnly=!0,document.getElementById(t._id).className="","data"===this.stageConfig.type?this.$API.saveTable({_id:t._id,name:document.getElementById(t._id).value},(function(e){console.log(e)})):"chart"===this.stageConfig.type?this.$API.saveChart({_id:t._id,name:document.getElementById(t._id).value},(function(e){console.log(e)})):"panel"===this.stageConfig.type&&this.$API.savePanel({_id:t._id,name:document.getElementById(t._id).value},(function(e){console.log(e)})))}},activated:function(){this.selectedFile={}},methods:{flush:function(){var e=this;this.$parent.stageConfig.files=[],"data"===this.stageConfig.type?this.$API.getTableList((function(t){t.success&&(e.$parent.stageConfig.files=t.info)})):"chart"===this.stageConfig.type?this.$API.getChartList((function(t){t.success&&(e.$parent.stageConfig.files=t.info)})):"panel"===this.stageConfig.type&&this.$API.getPanelList((function(t){t.success&&(e.$parent.stageConfig.files=t.info)}))},onerror:function(e,t){"data"===t?e.path[0].setAttribute("src",i("29d4")):"chart"===t?e.path[0].setAttribute("src",i("0270")):"panel"===t&&e.path[0].setAttribute("src",i("a3f7"))},endRename:function(e){this.selectedFile&&this.selectedFile._id&&document.getElementById(this.selectedFile._id)&&!0!==document.getElementById(this.selectedFile._id).readOnly&&e.target!=document.getElementById(this.selectedFile._id)&&(document.getElementById(this.selectedFile._id).readOnly=!0,document.getElementById(this.selectedFile._id).className="","data"===this.stageConfig.type?this.$API.saveTable({_id:this.selectedFile._id,name:document.getElementById(this.selectedFile._id).value},(function(e){console.log(e)})):"chart"===this.stageConfig.type?this.$API.saveChart({_id:this.selectedFile._id,name:document.getElementById(this.selectedFile._id).value},(function(e){console.log(e)})):"panel"===this.stageConfig.type&&this.$API.savePanel({_id:this.selectedFile._id,name:document.getElementById(this.selectedFile._id).value},(function(e){console.log(e)})))},edit:function(){this.selectedFile._id&&this.$emit("newTab",this.fileTabConfig(this.selectedFile))},rename:function(){var e=this;if(this.selectedFile._id)return this.$store.state.tabMap&&this.$store.state.tabMap.has(this.selectedFile._id)?(this.toShow=!0,this.info="无法重命名已打开的项目.",this.isExitShow=!1,void(this.trueFunc=void 0)):void setTimeout((function(){document.getElementById(e.selectedFile._id).select(),document.getElementById(e.selectedFile._id).readOnly=!1,document.getElementById(e.selectedFile._id).className="editing"}),0)},toDelete:function(){if(this.selectedFile._id){if(this.$store.state.tabMap&&this.$store.state.tabMap.has(this.selectedFile._id))return this.toShow=!0,this.info="无法删除已打开的项目。",this.isExitShow=!1,void(this.trueFunc=void 0);this.toShow=!0,this.info="确定要删除该项目吗?",this.isExitShow=!0,this.trueFunc=this.deleteFile}},deleteFile:function(){var e=this;this.isDeleteId=this.selectedFile._id,"data"===this.stageConfig.type&&this.selectedFile._id?this.$API.deleteTable({_id:this.selectedFile._id},(function(t){console.log(t),e.selectedFile={},e.$API.getTableList((function(t){t.success&&(e.$parent.stageConfig.files=t.info)}))})):"chart"===this.stageConfig.type&&this.selectedFile._id?this.$API.deleteChart({_id:this.selectedFile._id},(function(t){console.log(t),e.selectedFile={},e.$API.getChartList((function(t){t.success&&(e.$parent.stageConfig.files=t.info)}))})):"panel"===this.stageConfig.type&&this.selectedFile._id&&this.$API.deletePanel({_id:this.selectedFile._id},(function(t){console.log(t),e.selectedFile={},e.$API.getPanelList((function(t){t.success&&(e.$parent.stageConfig.files=t.info)}))}))},buildTabConfig:function(e){var t=this;if("data"===this.stageConfig.type){var i={name:"新建数据源",data:[],imgSrc:"@/assets/image/表格.png"};this.$API.newTable(i,(function(n){n.success&&(e({type:t.stageConfig.type,topic:i.name,key:n.info}),t.$API.getTableList((function(e){e.success&&(t.$parent.stageConfig.files=e.info)})))}))}else if("chart"===this.stageConfig.type){var n={name:"新建图表",data:[],option:{},imgSrc:"@/assets/image/图表.png"};this.$API.newChart(n,(function(i){i.success&&(e({type:t.stageConfig.type,topic:n.name,key:i.info}),t.$API.getChartList((function(e){e.success&&(t.$parent.stageConfig.files=e.info)})))}))}else if("panel"===this.stageConfig.type){var o={name:"新建仪表板",layout:[],back:{i:"back",type:"back",config:{backgroundColor:"#eaeaea",itemMargin:5}},imgSrc:"@/assets/image/仪表板.png"};this.$API.newPanel(o,(function(i){i.success&&(e({type:t.stageConfig.type,topic:o.name,key:i.info}),t.$API.getPanelList((function(e){e.success&&(t.$parent.stageConfig.files=e.info)})))}))}},fileTabConfig:function(e){return{type:this.stageConfig.type,topic:e.name,key:e._id}},toolShow:function(e){return!(this.stageConfig&&this.stageConfig.tools&&this.stageConfig.tools[e])||this.stageConfig.tools[e].show}}},f=(i("675c"),i("6b0d")),u=i.n(f);const A=u()(g,[["render",r],["__scopeId","data-v-f7759b6e"]]);t["a"]=A},"29d4":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAn1JREFUeF7tW7FuE0EQfXNEgoIiQpRe5MI1QshCG9GQCiHxD0EgH6HMB6DAF6REPoxQvoECiSbpfBaKCLSRIOTSRQhEA4rwDvIlCvbZZ+4uje/8rnFxO3szb2d337z1Cub8kTmPHwRgWgaET2rX9Ri3VPRyGTPFE+8nFuSjfXGwk+Z/agaEvnkPoFnGwJM+C3CkF+TeJCAmAtDzzZECV6sQ/FAMf/r9hcbtV1++Dsc1BkC3ZToieFSx4ONwFPphKTi8ORWA0DcRgFoVAQBwbIPo4v8A0IoGH4dlg2gk68emQOgbAsAMqDACnAJcA7gIchcgDxhCgDwgueORCJEJkgqf1QLqdLkIKRQPG4DcGNg659YEslukn4GNeLJ1Yqu76rBWpB/xvA1AY39yMcFk46wfD1tmC4I7sdtOl5c6h9tZbVPXJMW2fRkVGpBhfwhAHirMDEiglTWNOQW4BnAR5C7AbZA8gESITJBUmLUAi6FyV4MKfZ6V/48qrbICoH5yJI1NQPeL9BPrAZD1U9t9hW4W6Ufwz59c5XCRj826DQHIowdQEqMeMHqQmHV+UxChIEJBhIIIBREKIhREKIhQEKEgQkGk3ILIXJ4Od1tmTwSNuPBx0rSd9Ps2acXRzBVDvvkG4AqA7zaIBr9nz4S/ydXagPinLd7CydO8IMwKAN3Vel20vw7FgzgewY5tRyP3oMYA6K1eu69O32QtfUvVTvDQtqPXUzNg8LLr154NiZGlinGKs+9sEN1Nvk+9Ntd7bJpOseIBDVVcyoWCyCKgBsBvKPZy2Y57WIdiEYIfUORTlwW/AHyGyCfbPggm+cGbo+canQoYMwMqMIjnCuEvillrbrt4d1AAAAAASUVORK5CYII="},4021:function(e,t,i){},"62cb":function(e,t,i){"use strict";var n=i("7a23"),o={class:"middle-box"},s={class:"info-container"},c={class:"button-box"};function l(e,t,i,l,a,d){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{id:"popwin",onMousedown:t[3]||(t[3]=function(){return d.close&&d.close.apply(d,arguments)})},[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("span",{class:"exit iconfont text-disable",onClick:t[0]||(t[0]=function(e){return d.close()})},""),Object(n["createElementVNode"])("div",s,Object(n["toDisplayString"])(i.info),1),Object(n["createElementVNode"])("div",c,[i.isExitShow?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"button exit text-disable",id:"exit",onClick:t[1]||(t[1]=function(e){return d.close()})},"取消")):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",{class:"button confirm text-disable",id:"confirm",onClick:t[2]||(t[2]=function(){return d.confirm&&d.confirm.apply(d,arguments)})},"确认")])])],32)}var a={props:{trueFunc:{default:function(){},type:Function},info:{default:"info",type:String},isExitShow:{default:!0,type:Boolean}},data:function(){return{}},methods:{close:function(e){e&&"popwin"!==e.target.id||(this.$parent.toShow=!1)},confirm:function(){this.trueFunc(),this.close()}}},d=(i("9873"),i("6b0d")),r=i.n(d);const g=r()(a,[["render",l],["__scopeId","data-v-13c8b91e"]]);t["a"]=g},"675c":function(e,t,i){"use strict";i("4021")},9873:function(e,t,i){"use strict";i("f376")},a3f7:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAqZJREFUeF7tmrFrFEEUxr+3d01MFAtTWd4FTacIFlaKhdiI2lkex+6KeF2wEAmCWEjsrGZ2EctgYaGFCKKCjYJFBOEimj9AtAomxcntyJy38RDNzMsdxLl728437+b77ZuZN7NHmPCHJtw/BIBkwIQTkCkw4Qkgi6BMgVCnQBzHJwDUoiiaKopiPYqitlLqPddPcBkQx/EVIroO4OBfzK4Q0aJS6okvCBaA9nRtwTfwqHTzG2t3y1hJklwDcMcVm4jO+UJgAVjdW38Hg2OuAYyunW4f/v7pho3XaDRmq9XqFyLyGfOK1vqozzh8gm3F2U0AaZo2jDH3fUxZDREd8VkTQgKwZIzxnoLGmEtZli27gAUDIEkSBSBxGSrbiShVSmmXPiQA9wBcdRkq240xjSzLHrj0wQBI03TBGLPkMlS2F0VxOs/zFy59MACazebxSqXy1mWo374JYL/W+odLHwwAaySO40dEdMFlCsAtrfWih453GNrNbdCaabVa+zqdzkNjzJltzCmt9WUf873t0ldodR/31M5y9KPQHtpce/pnnCRJzlsIRDQHYArAOhF96Ha7j/M8f835XRYATuBQtFwAJ3dg7JXt056ub5e2/ww7v/H5GYADALsEt/2cDxfASwAcCKcA9ACsztS/9o04B/VbsHUWsABsf9/nG4BZH7EA8KE0oJEMkCkga4AsgrILMBZO2QalDpBCSCpBKYXlLCCHITkNynFY7gNm5p4zKshS+qb/cTT8C5EdmB/sIgBCvhIb5uX3iqj+XWKQd4LDmLd9yzvLYKeAABiSgGSArAGyCMouINug1AG/vg7/F4XQzSG3NW738vcsgIvMzs6/yA1WWszY4yPnfh4fH+d9JwJg7F4p05BkABPY2MklA8bulTINTXwG/ARni3ZQ9zsM/wAAAABJRU5ErkJggg=="},b0c0:function(e,t,i){var n=i("83ab"),o=i("5e77").EXISTS,s=i("e330"),c=i("9bf2").f,l=Function.prototype,a=s(l.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,r=s(d.exec),g="name";n&&!o&&c(l,g,{configurable:!0,get:function(){try{return r(d,a(this))[1]}catch(e){return""}}})},f376:function(e,t,i){}}]);
//# sourceMappingURL=chunk-0069da4f.63c98936.js.map