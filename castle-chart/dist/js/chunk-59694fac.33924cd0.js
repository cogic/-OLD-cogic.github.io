(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59694fac"],{"1da4":function(e,t,n){"use strict";n("e8d9")},"23d8":function(e,t,n){},"5fac":function(e,t,n){"use strict";n("a21e")},"606a":function(e,t,n){"use strict";n("23d8")},6567:function(e,t,n){},"6dcd":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),c=n("a1d8"),i=n.n(c),a=function(e){return Object(o["pushScopeId"])("data-v-a67f29e0"),e=e(),Object(o["popScopeId"])(),e},r=a((function(){return Object(o["createElementVNode"])("header",null,[Object(o["createElementVNode"])("img",{class:"logo",src:i.a,alt:"logo"}),Object(o["createElementVNode"])("h1",{class:"headline"},"CastleChart")],-1)})),u={id:"view-outer"},s={id:"view-container"};function l(e,t,n,c,i,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[r,Object(o["createElementVNode"])("main",null,[Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",s,[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(a.currentView)))])])])],64)}var d=n("6b6c");function f(e,t,n,c,i,a){var r=d["a"];return Object(o["openBlock"])(),Object(o["createBlock"])(r,{ref:"myChart",data:i.chartData,option:i.chartOption},null,8,["data","option"])}var m={components:{EChart:d["a"]},data:function(){return{chartData:{},chartOption:{}}},mounted:function(){var e=this;this.$API.getSharedChart({_id:this.$route.params.viewid},(function(t){t.success&&(e.chartData=t.info.data,e.chartOption=t.info.option)}))}},h=n("6b0d"),p=n.n(h);const b=p()(m,[["render",f]]);var g=b,y=n("d2cb"),v={class:"container-box"};function k(e,t,n,c,i,a){var r=y["a"];return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",v,[Object(o["createVNode"])(r,{ref:"GLayout","is-resizable":!1,"is-draggable":!1,"is-removable":!1,"is-selectable":!1},null,512)])}var O={components:{GLayout:y["a"]},data:function(){return{panelBackColor:"",panelItemMargin:""}},mounted:function(){var e=this;this.$API.getSharedPanel({_id:this.$route.params.viewid},(function(t){t.success&&(e.setLayout(t.info.layout,t.info.back),e.panelBackColor=t.info.back.config.backgroundColor,e.panelItemMargin=t.info.back.config.itemMargin)}))},methods:{setLayout:function(e,t){this.$refs.GLayout.setLayout(e),this.$refs.GLayout.back=t},loadData:function(e,t,n){},curItemChange:function(){}}};n("1da4");const j=p()(O,[["render",k],["__scopeId","data-v-49344fe0"]]);var w=j,I={components:{ChartView:g,PanelView:w},data:function(){return{}},computed:{currentView:function(){return"chart"===this.$route.params.type?"chart-view":"panel"===this.$route.params.type?"panel-view":void 0}}};n("5fac");const E=p()(I,[["render",l],["__scopeId","data-v-a67f29e0"]]);t["default"]=E},"855b":function(e,t,n){"use strict";n("6567")},a1d8:function(e,t,n){e.exports=n.p+"img/logo.054d559c.png"},a21e:function(e,t,n){},d2cb:function(e,t,n){"use strict";var o=n("6b6c"),c=n("7a23"),i=function(e){return Object(c["pushScopeId"])("data-v-117cefee"),e=e(),Object(c["popScopeId"])(),e},a={id:"layout-box",ref:"layoutBox"},r={key:0,class:"item-content"},u=["id"],s=["id"],l={key:2,class:"item-content"},d={key:3},f=["onClick"],m=i((function(){return Object(c["createElementVNode"])("span",{class:"iconfont"},"",-1)})),h=[m];function p(e,t,n,i,m,p){var b=o["a"],g=Object(c["resolveComponent"])("grid-item"),y=Object(c["resolveComponent"])("grid-layout");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createVNode"])(y,{id:"GridLayout",layout:m.layout,"auto-size":m.autoSize,margin:m.margin,"col-num":m.colNum,"row-height":m.rowHeight,"is-draggable":n.isDraggable,"is-resizable":n.isResizable,"vertical-compact":m.verticalCompact,"use-css-transforms":!0},{default:Object(c["withCtx"])((function(){return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(m.layout,(function(e,o){return Object(c["openBlock"])(),Object(c["createBlock"])(g,{class:Object(c["normalizeClass"])({selected:m.curItem.i===e.i&&n.isSelectable}),onResize:function(t){return p.resizeEvent(e)},onResized:function(t){return p.resizeEvent(e)},onContainerResized:function(t){return p.resizeEvent(e)},onMousedown:function(t){return p.setCurItem(t,e)},onClick:function(t){return p.setCurItem(t,e)},key:e.i,static:e.static,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,"drag-ignore-from":".no-drag"},{default:Object(c["withCtx"])((function(){return["chart"===e.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",r,[Object(c["createVNode"])(b,{ref_for:!0,ref:"chart"+e.i,data:e.config.data,option:e.config.option},null,8,["data","option"])])):"text"===e.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{key:1,class:"item-content text",id:"textParent"+e.i},[Object(c["createElementVNode"])("h1",{id:"text"+e.i},null,8,s)],8,u)):"image"===e.type?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",l,"图片")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",d,"NULL")),Object(c["withDirectives"])(Object(c["createElementVNode"])("span",{class:"remove no-drag text-disable",onClick:Object(c["withModifiers"])((function(t){return p.removeItem(t,e.i)}),["stop"]),onMousedown:t[0]||(t[0]=Object(c["withModifiers"])((function(){}),["stop"]))},h,40,f),[[c["vShow"],n.isRemovable]])]})),_:2},1032,["class","onResize","onResized","onContainerResized","onMousedown","onClick","static","x","y","w","h","i"])})),128))]})),_:1},8,["layout","auto-size","margin","col-num","row-height","is-draggable","is-resizable","vertical-compact"])],512)}n("d3b7"),n("159b"),n("d81d"),n("a434");var b=n("7be8"),g={components:{GridLayout:b["GridLayout"],GridItem:b["GridItem"],EChart:o["a"]},props:{isResizable:{type:Boolean,default:!0},isDraggable:{type:Boolean,default:!0},isRemovable:{type:Boolean,default:!0},isSelectable:{type:Boolean,default:!0}},data:function(){return{layout:[],back:{i:"back",type:"back",config:{backgroundColor:""}},curItem:{},colNum:20,rowHeight:30,index:0,defaultW:5,defaultH:4,margin:[5,5],autoSize:!0,verticalCompact:!0}},watch:{curItem:function(e,t){this.$parent.curItemChange()},back:{handler:function(e){this.$refs.layoutBox.style.backgroundColor=e.config.backgroundColor},deep:!0}},methods:{clearLayout:function(){this.setLayout([])},setTextItem:function(e){document.getElementById("text"+e.i).innerHTML=e.config.content,document.getElementById("text"+e.i).style.fontFamily=e.config.fontFamily,document.getElementById("text"+e.i).style.fontSize=e.config.fontSize+"px",document.getElementById("text"+e.i).style.fontWeight=e.config.fontWeight,document.getElementById("text"+e.i).style.color=e.config.color,document.getElementById("textParent"+e.i).style.backgroundColor=e.config.backgroundColor},setLayout:function(e){var t=this;this.layout=[],e.forEach((function(e){t.layout.push(e),t.curItem=e,"chart"===e.type?setTimeout((function(){t.$parent.loadData(e.config.data,e),window.addEventListener("resize",t.$refs["chart"+e.i][0].chartResize),window.dispatchEvent(new Event("resize"))}),0):"text"===e.type&&setTimeout((function(){t.setTextItem(e)}),0),t.index++})),this.curItem=this.back},resizeEvent:function(e){var t=this;"chart"===e.type&&setTimeout((function(){t.$refs["chart"+e.i][0].chartResize()}),0)},setChart:function(e,t,n){n?(e&&(n.config.data=e),t&&(n.config.option=t)):(e&&(this.curItem.config.data=e),t&&(this.curItem.config.option=t))},clearChart:function(){this.$refs["chart"+this.curItem.i][0].clear()},setCurItem:function(e,t){e.stopPropagation(),this.curItem=t},itemTitle:function(e){var t=e.i;return"text"===e.type&&(t=e.config.content?e.config.content:"这是文本"),t},addItem:function(e,t){var n=this,o={x:this.layout.length*this.defaultW%this.colNum,y:this.layout.length+this.colNum,w:this.defaultW,h:this.defaultH,i:this.index,type:e,config:t};return this.layout.push(o),this.curItem=o,this.index++,window.dispatchEvent(new Event("resize")),"text"===o.type&&setTimeout((function(){n.setTextItem(o)}),0),o},removeItem:function(e,t){var n=this,o=this.layout.map((function(e){return e.i})).indexOf(t);this.layout.splice(o,1),window.dispatchEvent(new Event("resize")),setTimeout((function(){n.curItem=n.back}),0)}}},y=(n("606a"),n("855b"),n("6b0d")),v=n.n(y);const k=v()(g,[["render",p],["__scopeId","data-v-117cefee"]]);t["a"]=k},e8d9:function(e,t,n){}}]);
//# sourceMappingURL=chunk-59694fac.33924cd0.js.map