(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da45efd2"],{"23d8":function(t,e,n){},"40f7":function(t,e,n){"use strict";n("a8da")},"4d21":function(t,e,n){"use strict";n.r(e);var o=n("7a23"),i={id:"view-container"};function c(t,e,n,c,a,r){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(r.currentView)))])}var a=n("6b6c");function r(t,e,n,i,c,r){var s=a["a"];return Object(o["openBlock"])(),Object(o["createBlock"])(s,{ref:"myChart",data:c.chartData,option:c.chartOption},null,8,["data","option"])}var s={components:{EChart:a["a"]},data:function(){return{chartData:{},chartOption:{}}},mounted:function(){var t=this;this.$API.getChart({_id:this.$route.params.viewid},(function(e){e.success&&(t.chartData=e.info.data,t.chartOption=e.info.option)}))}},u=n("6b0d"),l=n.n(u);const d=l()(s,[["render",r]]);var f=d,m=n("d2cb"),h={class:"container-box"};function p(t,e,n,i,c,a){var r=m["a"];return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,[Object(o["createVNode"])(r,{ref:"GLayout","is-resizable":!1,"is-draggable":!1,"is-removable":!1,"is-selectable":!1},null,512)])}var b={components:{GLayout:m["a"]},data:function(){return{panelBackColor:"",panelItemMargin:""}},mounted:function(){var t=this;this.$API.getPanel({_id:this.$route.params.viewid},(function(e){e.success&&(t.setLayout(e.info.layout,e.info.back),t.panelBackColor=e.info.back.config.backgroundColor,t.panelItemMargin=e.info.back.config.itemMargin)}))},methods:{setLayout:function(t,e){this.$refs.GLayout.setLayout(t),this.$refs.GLayout.back=e},loadData:function(t,e,n){},curItemChange:function(){}}};n("40f7");const y=l()(b,[["render",p],["__scopeId","data-v-2716350e"]]);var g=y,v={components:{ChartView:f,PanelView:g},data:function(){return{}},computed:{currentView:function(){return"chart"===this.$route.params.type?"chart-view":"panel"===this.$route.params.type?"panel-view":void 0}}};n("a23d");const k=l()(v,[["render",c],["__scopeId","data-v-1df42ec7"]]);e["default"]=k},"606a":function(t,e,n){"use strict";n("23d8")},6567:function(t,e,n){},"855b":function(t,e,n){"use strict";n("6567")},"9ad7":function(t,e,n){},a23d:function(t,e,n){"use strict";n("9ad7")},a8da:function(t,e,n){},d2cb:function(t,e,n){"use strict";var o=n("6b6c"),i=n("7a23"),c=function(t){return Object(i["pushScopeId"])("data-v-117cefee"),t=t(),Object(i["popScopeId"])(),t},a={id:"layout-box",ref:"layoutBox"},r={key:0,class:"item-content"},s=["id"],u=["id"],l={key:2,class:"item-content"},d={key:3},f=["onClick"],m=c((function(){return Object(i["createElementVNode"])("span",{class:"iconfont"},"",-1)})),h=[m];function p(t,e,n,c,m,p){var b=o["a"],y=Object(i["resolveComponent"])("grid-item"),g=Object(i["resolveComponent"])("grid-layout");return Object(i["openBlock"])(),Object(i["createElementBlock"])("div",a,[Object(i["createVNode"])(g,{id:"GridLayout",layout:m.layout,"auto-size":m.autoSize,margin:m.margin,"col-num":m.colNum,"row-height":m.rowHeight,"is-draggable":n.isDraggable,"is-resizable":n.isResizable,"vertical-compact":m.verticalCompact,"use-css-transforms":!0},{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createElementBlock"])(i["Fragment"],null,Object(i["renderList"])(m.layout,(function(t,o){return Object(i["openBlock"])(),Object(i["createBlock"])(y,{class:Object(i["normalizeClass"])({selected:m.curItem.i===t.i&&n.isSelectable}),onResize:function(e){return p.resizeEvent(t)},onResized:function(e){return p.resizeEvent(t)},onContainerResized:function(e){return p.resizeEvent(t)},onMousedown:function(e){return p.setCurItem(e,t)},onClick:function(e){return p.setCurItem(e,t)},key:t.i,static:t.static,x:t.x,y:t.y,w:t.w,h:t.h,i:t.i,"drag-ignore-from":".no-drag"},{default:Object(i["withCtx"])((function(){return["chart"===t.type?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",r,[Object(i["createVNode"])(b,{ref_for:!0,ref:"chart"+t.i,data:t.config.data,option:t.config.option},null,8,["data","option"])])):"text"===t.type?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",{key:1,class:"item-content text",id:"textParent"+t.i},[Object(i["createElementVNode"])("h1",{id:"text"+t.i},null,8,u)],8,s)):"image"===t.type?(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",l,"图片")):(Object(i["openBlock"])(),Object(i["createElementBlock"])("div",d,"NULL")),Object(i["withDirectives"])(Object(i["createElementVNode"])("span",{class:"remove no-drag text-disable",onClick:Object(i["withModifiers"])((function(e){return p.removeItem(e,t.i)}),["stop"]),onMousedown:e[0]||(e[0]=Object(i["withModifiers"])((function(){}),["stop"]))},h,40,f),[[i["vShow"],n.isRemovable]])]})),_:2},1032,["class","onResize","onResized","onContainerResized","onMousedown","onClick","static","x","y","w","h","i"])})),128))]})),_:1},8,["layout","auto-size","margin","col-num","row-height","is-draggable","is-resizable","vertical-compact"])],512)}n("d3b7"),n("159b"),n("d81d"),n("a434");var b=n("7be8"),y={components:{GridLayout:b["GridLayout"],GridItem:b["GridItem"],EChart:o["a"]},props:{isResizable:{type:Boolean,default:!0},isDraggable:{type:Boolean,default:!0},isRemovable:{type:Boolean,default:!0},isSelectable:{type:Boolean,default:!0}},data:function(){return{layout:[],back:{i:"back",type:"back",config:{backgroundColor:""}},curItem:{},colNum:20,rowHeight:30,index:0,defaultW:5,defaultH:4,margin:[5,5],autoSize:!0,verticalCompact:!0}},watch:{curItem:function(t,e){this.$parent.curItemChange()},back:{handler:function(t){this.$refs.layoutBox.style.backgroundColor=t.config.backgroundColor},deep:!0}},methods:{clearLayout:function(){this.setLayout([])},setTextItem:function(t){document.getElementById("text"+t.i).innerHTML=t.config.content,document.getElementById("text"+t.i).style.fontFamily=t.config.fontFamily,document.getElementById("text"+t.i).style.fontSize=t.config.fontSize+"px",document.getElementById("text"+t.i).style.fontWeight=t.config.fontWeight,document.getElementById("text"+t.i).style.color=t.config.color,document.getElementById("textParent"+t.i).style.backgroundColor=t.config.backgroundColor},setLayout:function(t){var e=this;this.layout=[],t.forEach((function(t){e.layout.push(t),e.curItem=t,"chart"===t.type?setTimeout((function(){e.$parent.loadData(t.config.data,t),window.addEventListener("resize",e.$refs["chart"+t.i][0].chartResize),window.dispatchEvent(new Event("resize"))}),0):"text"===t.type&&setTimeout((function(){e.setTextItem(t)}),0),e.index++})),this.curItem=this.back},resizeEvent:function(t){var e=this;"chart"===t.type&&setTimeout((function(){e.$refs["chart"+t.i][0].chartResize()}),0)},setChart:function(t,e,n){n?(t&&(n.config.data=t),e&&(n.config.option=e)):(t&&(this.curItem.config.data=t),e&&(this.curItem.config.option=e))},clearChart:function(){this.$refs["chart"+this.curItem.i][0].clear()},setCurItem:function(t,e){t.stopPropagation(),this.curItem=e},itemTitle:function(t){var e=t.i;return"text"===t.type&&(e=t.config.content?t.config.content:"这是文本"),e},addItem:function(t,e){var n=this,o={x:this.layout.length*this.defaultW%this.colNum,y:this.layout.length+this.colNum,w:this.defaultW,h:this.defaultH,i:this.index,type:t,config:e};return this.layout.push(o),this.curItem=o,this.index++,window.dispatchEvent(new Event("resize")),"text"===o.type&&setTimeout((function(){n.setTextItem(o)}),0),o},removeItem:function(t,e){var n=this,o=this.layout.map((function(t){return t.i})).indexOf(e);this.layout.splice(o,1),window.dispatchEvent(new Event("resize")),setTimeout((function(){n.curItem=n.back}),0)}}},g=(n("606a"),n("855b"),n("6b0d")),v=n.n(g);const k=v()(y,[["render",p],["__scopeId","data-v-117cefee"]]);e["a"]=k}}]);
//# sourceMappingURL=chunk-da45efd2.3da7022f.js.map